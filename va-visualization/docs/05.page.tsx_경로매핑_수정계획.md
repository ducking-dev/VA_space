# 05. page.tsx 경로 매핑 및 수정 계획

> **문제**: page.tsx의 Import 경로 및 변수명 불일치  
> **날짜**: 2025년 1월 27일  
> **프로젝트**: V-A 감정 공간 시각화  
> **상태**: 🔴 Critical - 즉시 수정 필요

---

## 🚨 1. 문제 분석 요약

| 문제 유형 | 개수 | 심각도 | 영향 범위 |
|-----------|------|--------|-----------|
| Import 경로 불일치 | 2개 | 🔴 Critical | 컴파일 실패 |
| 변수명 불일치 | 2개 | 🔴 Critical | 런타임 에러 |
| 파일명 중복 | 1개 | 🟡 High | 모듈 충돌 |
| **총계** | **5개** | - | **시스템 불안정** |

---

## 🔍 2. 상세 문제 분석

### 2.1 Import 경로 문제

| 라인 | 현재 Import | 실제 파일 위치 | 문제점 | 해결 방법 |
|------|-------------|---------------|--------|-----------|
| 14 | `useEmotionData` from `@/lib/hooks` | `@/lib/hooks/data/useEmotionData` | ✅ 정상 | 수정 불필요 |
| 15 | `useHover, useViewport` from `@/lib/hooks/interaction` | `@/lib/hooks/interaction/index.ts` | ❌ 경로 불일치 | 경로 수정 필요 |

### 2.2 변수명 불일치 문제

| 라인 | 사용된 변수 | 정의된 변수 | 문제점 | 해결 방법 |
|------|-------------|-------------|--------|-----------|
| 143 | `useHover<IRenderablePoint>()` | `useHover` Hook 존재 | ❌ Import 누락 | Import 추가 |
| 144 | `useViewport()` | `useViewport` Hook 존재 | ❌ Import 누락 | Import 추가 |

### 2.3 파일명 중복 문제

| 파일명 | 위치 | 용도 | 문제점 | 해결 방법 |
|--------|------|------|--------|-----------|
| `colors.ts` | `lib/constants/` | 파스텔 색상 | 중복 파일 | 통합 또는 삭제 |
| `colors.const.ts` | `lib/constants/` | 신뢰도 색상 | 중복 파일 | 통합 또는 삭제 |

---

## 🔧 3. 수정 계획

### 3.1 즉시 수정 (Critical)

#### **A. page.tsx Import 수정**

| 수정 항목 | 현재 코드 | 수정 후 코드 | 이유 |
|-----------|-----------|-------------|------|
| **라인 15** | `import { useHover, useViewport } from '@/lib/hooks/interaction';` | `import { useHover, useViewport } from '@/lib/hooks';` | hooks/index.ts에서 export |

#### **B. hooks/index.ts 중복 제거**

| 수정 항목 | 현재 코드 | 수정 후 코드 | 이유 |
|-----------|-----------|-------------|------|
| **라인 10-12** | 중복 export 제거 | `export * from './interaction';` | 단일 export로 통합 |

### 3.2 파일 통합 (High Priority)

#### **A. 색상 상수 파일 통합**

| 파일 | 용도 | 통합 방안 |
|------|------|-----------|
| `colors.ts` | 파스텔 색상 | `colors.const.ts`에 통합 |
| `colors.const.ts` | 신뢰도 색상 | 메인 파일로 유지 |

### 3.3 경로 매핑 검증

#### **A. tsconfig.json 경로 매핑 확인**

| 경로 패턴 | 현재 설정 | 상태 | 검증 결과 |
|-----------|-----------|------|-----------|
| `@/lib/*` | `["./lib/*"]` | ✅ 정상 | 수정 불필요 |
| `@/hooks/*` | `["./lib/hooks/*"]` | ✅ 정상 | 수정 불필요 |
| `@/constants/*` | `["./lib/constants/*"]` | ✅ 정상 | 수정 불필요 |

---

## 📋 4. 단계별 수정 계획

### Phase 1: Import 경로 수정 (5분)

#### **Step 1.1: page.tsx 수정**

```typescript
// 라인 15 수정
import { useHover, useViewport } from '@/lib/hooks';
```

#### **Step 1.2: hooks/index.ts 정리**

```typescript
// 중복 export 제거
export * from './interaction';
// export * from './interaction/useHover'; // 삭제
// export * from './interaction/useViewport'; // 삭제
```

### Phase 2: 파일 통합 (10분)

#### **Step 2.1: colors.ts 내용을 colors.const.ts로 통합**

```typescript
// colors.const.ts에 추가
export const PASTEL_COLORS = {
  // ... colors.ts 내용
} as const;
```

#### **Step 2.2: colors.ts 파일 삭제**

```bash
rm lib/constants/colors.ts
```

### Phase 3: 검증 및 테스트 (5분)

#### **Step 3.1: 컴파일 검증**

```bash
npm run build
```

#### **Step 3.2: 타입 검증**

```bash
npx tsc --noEmit
```

---

## 📊 5. 수정 우선순위

| 우선순위 | 수정 항목 | 예상 시간 | 영향도 | 의존성 |
|----------|-----------|-----------|--------|--------|
| 1 | page.tsx Import 수정 | 2분 | 🔴 Critical | 없음 |
| 2 | hooks/index.ts 정리 | 3분 | 🔴 Critical | 1번 완료 후 |
| 3 | colors.ts 파일 통합 | 10분 | 🟡 High | 1-2번 완료 후 |
| 4 | 컴파일 검증 | 5분 | 🟢 Medium | 1-3번 완료 후 |

---

## 🎯 6. 예상 결과

### 6.1 수정 전 상태

| 항목 | 상태 | 문제점 |
|------|------|--------|
| **컴파일** | ❌ 실패 | Import 경로 에러 |
| **타입 체크** | ❌ 실패 | 변수명 불일치 |
| **빌드** | ❌ 실패 | 모듈 해결 실패 |

### 6.2 수정 후 예상 상태

| 항목 | 상태 | 개선점 |
|------|------|--------|
| **컴파일** | ✅ 성공 | 모든 Import 정상 |
| **타입 체크** | ✅ 성공 | 변수명 일치 |
| **빌드** | ✅ 성공 | 모듈 해결 성공 |

---

## 🔍 7. 검증 체크리스트

### 7.1 수정 완료 후 확인 항목

- [ ] page.tsx 컴파일 에러 0건
- [ ] hooks/index.ts 중복 export 제거
- [ ] colors.ts 파일 삭제 완료
- [ ] colors.const.ts 통합 완료
- [ ] TypeScript 컴파일 성공
- [ ] Next.js 빌드 성공
- [ ] 모든 Import 경로 정상 작동

### 7.2 기능 검증 항목

- [ ] useHover Hook 정상 작동
- [ ] useViewport Hook 정상 작동
- [ ] useEmotionData Hook 정상 작동
- [ ] CONFIDENCE_COLORS 상수 정상 접근
- [ ] 페이지 렌더링 정상

---

## 📝 8. 주의사항

### 8.1 수정 시 주의사항

| 주의사항 | 설명 | 대응 방안 |
|----------|------|-----------|
| **Import 순서** | 기존 Import 순서 유지 | 순서 변경 최소화 |
| **타입 안정성** | 타입 정의 변경 금지 | 기존 타입 유지 |
| **기능 호환성** | 기존 기능 동작 보장 | 테스트 필수 |

### 8.2 롤백 계획

| 문제 발생 시 | 롤백 방법 | 예상 시간 |
|-------------|-----------|-----------|
| **컴파일 에러** | Git revert | 1분 |
| **빌드 실패** | 이전 버전 복원 | 2분 |
| **런타임 에러** | 단계별 롤백 | 5분 |

---

## 🎯 9. 결론

### 9.1 수정 필요성

- **즉시 수정 필요**: Import 경로 및 변수명 불일치
- **단기 수정 필요**: 파일 중복 문제 해결
- **장기 개선 필요**: 모듈 구조 최적화

### 9.2 예상 효과

- ✅ **컴파일 에러 완전 해결**
- ✅ **빌드 성공률 100% 달성**
- ✅ **코드 품질 향상**
- ✅ **유지보수성 개선**

### 9.3 다음 단계

1. **즉시**: Phase 1 수정 실행
2. **1시간 내**: Phase 2 완료
3. **1일 내**: Phase 3 검증 완료
4. **지속적**: 코드 품질 모니터링

---

**작성일**: 2025년 1월 27일  
**작성자**: VEATIC 연구팀  
**버전**: v1.0  
**상태**: 🔴 Critical - 즉시 수정 필요

---

## 📋 10. 참고 자료

- [TypeScript 경로 매핑 가이드](./01.VA평면_구현계획.md)
- [에러 해결 모듈 가이드](./03.에러해결_Module_Not_Found.md)
- [route.ts 에러 분석](./04.route.ts_에러분석_보고서.md)
- [Next.js 모듈 해결 가이드](https://nextjs.org/docs/advanced-features/module-resolution)